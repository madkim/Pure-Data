#N canvas 685 76 746 662 12;
#N canvas 666 112 606 380 hanning-window 0;
#N canvas 0 22 450 300 (subpatch) 0;
#X array hanning 1024 float 0;
#X coords 0 1 1023 0 200 120 1 0 0;
#X restore 294 190 graph;
#X msg 196 154 0;
#X obj 90 209 osc~;
#X obj 90 155 samplerate~;
#X obj 90 235 *~ -0.5;
#X obj 90 261 +~ 0.5;
#X obj 82 75 bng 15 250 50 0 empty empty empty 0 -6 0 8 -262144 -1
-1;
#X obj 82 289 tabwrite~ hanning;
#X obj 90 182 / 1024;
#X text 138 207 period 1024;
#X obj 82 120 t b b b;
#X obj 82 38 loadbang;
#X msg 111 76 \; pd dsp 1;
#X text 173 35 calclualte hanning window table on startup;
#X connect 1 0 2 1;
#X connect 2 0 4 0;
#X connect 3 0 8 0;
#X connect 4 0 5 0;
#X connect 5 0 7 0;
#X connect 6 0 10 0;
#X connect 8 0 2 0;
#X connect 10 0 7 0;
#X connect 10 1 3 0;
#X connect 10 2 1 0;
#X connect 11 0 6 0;
#X connect 11 0 12 0;
#X restore 121 560 pd hanning-window;
#X obj 50 561 dac~;
#X obj 18 20 cnv 15 400 40 empty empty spatial_filtering 20 12 0 24
-228992 -66577 0;
#X msg 76 286 start;
#X msg 92 315 stop;
#X msg 50 258 open song.wav;
#X obj 50 355 readsf~ 2;
#N canvas 0 22 450 278 (subpatch) 0;
#X array amp_left 256 float 1;
#A 0 0.365535 1.15768 1.92754 5.04331 2.7362 4.78743 7.43866 0.201959
8.17436 7.15675 6.10061 17.6784 7.45162 11.7137 10.5671 3.99006 3.13833
2.00689 0.29162 2.69274 2.14406 1.0613 2.26616 1.37982 1.05084 1.45384
0.831246 3.05092 2.89316 2.06232 3.58438 0.78734 1.09802 0.114926 0.516937
0.876497 1.5803 0.74943 0.990152 0.592829 0.776907 0.744426 0.735722
0.191552 0.237697 0.519646 1.71846 1.32548 1.29031 1.8329 1.61299 0.960027
3.71807 2.84631 1.19968 1.90856 0.611427 1.2826 0.811578 0.989739 0.95301
0.553648 0.624394 1.41313 0.767291 0.33047 0.552398 0.250532 0.853031
0.931929 0.761181 1.75458 0.867742 2.22451 1.52951 0.69592 1.83303
1.08152 0.435801 1.43479 1.74366 0.777494 1.45928 0.579088 0.48912
0.262822 0.221147 0.166003 0.0708531 0.0203145 0.126968 0.08164 0.295498
0.774195 0.514709 0.252106 0.44419 0.358833 0.489848 0.330388 0.110592
0.400879 0.586576 0.486049 0.27181 0.402254 0.198527 0.144789 0.155449
0.248055 0.112975 0.0360116 0.051656 0.0512083 0.0918195 0.135743 0.0777874
0.0689415 0.0873915 0.0760986 0.0570448 0.0550792 0.0273568 0.070953
0.0955522 0.0223261 0.140648 0.147132 0.0393643 0.0581242 0.0105536
0.163667 0.107614 0.117744 0.0399087 0.109582 0.013664 0.11703 0.136058
0.165449 0.15797 0.078353 0.0321339 0.0522156 0.076298 0.011698 0.0507875
0.058378 0.0125599 0.0249602 0.055016 0.0307229 0.036723 0.0355526
0.0330115 0.0463919 0.0491214 0.149389 0.142737 0.149654 0.139047 0.0805999
0.0872814 0.116143 0.098932 0.116346 0.0995557 0.0938669 0.0671559
0.00977955 0.0361214 0.0178561 0.0180467 0.0181624 0.0444605 0.0782251
0.0245381 0.0150742 0.0135693 0.0419658 0.0352573 0.0644323 0.0936578
0.0195412 0.0537614 0.0491623 0.0273451 0.0460545 0.0581436 0.04495
0.0507751 0.0181699 0.0476106 0.0686866 0.0408253 0.0249822 0.0329445
0.0343475 0.0344992 0.0145567 0.108823 0.0780722 0.0743601 0.147142
0.0588883 0.0886352 0.124218 0.0568238 0.148507 0.211441 0.0611285
0.0977381 0.0477512 0.0484097 0.0266963 0.0614044 0.0546202 0.0402918
0.0570105 0.0376083 0.0092624 0.0164187 0.0109968 0.00710909 0.0187427
0.0330195 0.0277007 0.0229098 0.0228841 0.00819201 0.0517234 0.0235395
0.0234487 0.0111308 0.0393226 0.037922 0.0502739 0.048288 0.0515 0.0365177
0.0648884 0.0047328 0.032317 0.030674 0.0137492 0.0252957 0.0234406
0.0140476 0.011056 0.0152895 0.0245304 0.0203511 0.023996 0.0119349
0.00788932 0.0275218;
#X coords 0 100 255 0 256 140 1 0 0;
#X restore 454 36 graph;
#N canvas 0 22 450 278 (subpatch) 0;
#X array amp_right 256 float 1;
#A 0 0.354535 8.4042 19.9116 9.51206 6.79742 7.28855 8.20229 2.4913
4.06893 3.41 5.50907 12.9086 6.04217 8.99019 8.05843 2.98286 0.548844
1.61099 0.341359 1.32838 1.51126 2.21394 1.96717 1.43552 1.3002 1.67393
0.774726 1.29969 1.15725 1.61542 2.42705 0.647923 0.632002 0.516988
1.20535 0.625079 1.0439 0.44213 0.933548 0.502762 0.191984 0.360235
0.354991 0.257041 0.815246 1.44254 2.45724 1.54035 0.581116 1.19592
1.11471 0.686586 2.31872 1.90876 1.05978 1.80031 0.838376 1.12304 0.819969
0.723325 0.792652 0.48197 0.254194 0.331186 0.10979 0.358313 0.81577
0.526627 0.65963 0.863973 0.361931 1.22019 0.14994 1.80449 1.06622
0.543076 1.2397 0.828346 0.277972 0.912512 1.2832 0.690366 0.539782
0.352844 0.403282 0.25781 0.206348 0.21025 0.253192 0.39254 0.187675
0.246809 0.161456 0.510277 0.368369 0.140211 0.340584 0.383811 0.345306
0.1023 0.200916 0.389039 0.417443 0.306225 0.203057 0.227329 0.161524
0.0667398 0.272574 0.358273 0.112098 0.0241097 0.0430081 0.0545372
0.0188093 0.0783659 0.219108 0.56408 0.556243 0.15725 0.0444722 0.0332098
0.0300269 0.0421171 0.097279 0.153784 0.290618 0.210666 0.0172528 0.0407289
0.259447 0.468359 0.202245 0.070276 0.0257354 0.0500368 0.112451 0.146064
0.14421 0.155018 0.100795 0.0573705 0.0193132 0.0558628 0.131554 0.120329
0.0543776 0.0184976 0.0209328 0.00697763 0.0294595 0.0092664 0.084637
0.111006 0.12123 0.0699988 0.0262935 0.0893591 0.0906973 0.119374 0.137448
0.066262 0.141156 0.203769 0.135622 0.0290434 0.0453739 0.0622803 0.0399723
0.00338457 0.00366929 0.0374626 0.0549136 0.0273686 0.0137242 0.0377696
0.0110768 0.0171012 0.00947121 0.0181148 0.0141716 0.0934751 0.12769
0.0490647 0.0235832 0.0140128 0.0064398 0.0106393 0.0236782 0.0194763
0.0245005 0.0152647 0.00309908 0.0180531 0.0256599 0.0361601 0.0239459
0.0271088 0.0323714 0.0103343 0.0432593 0.043156 0.040697 0.0962006
0.042492 0.0533078 0.0699945 0.0599571 0.0908876 0.114846 0.0260373
0.0835208 0.0476395 0.026107 0.018457 0.0144736 0.0124143 0.00311137
0.0192494 0.0251824 0.0122917 0.0133813 0.00980627 0.0174946 0.0128178
0.0203618 0.0241201 0.0287824 0.0129967 0.00540301 0.0204673 0.0208149
0.00487844 0.00534387 0.0130895 0.0112304 0.0246356 0.0382163 0.0331284
0.0152297 0.026873 0.0178249 0.0103291 0.00381268 0.00286815 0.0225917
0.020158 0.00556473 0.00825359 0.0238612 0.015838 0.00977045 0.0167228
0.0173375 0.00734849 0.0198455;
#X coords 0 100 255 0 256 140 1 0 0;
#X restore 456 209 graph;
#N canvas 0 22 450 278 (subpatch) 0;
#X array pan 256 float 3;
#A 0 0.492362 0.878927 0.911739 0.653509 0.712995 0.603557 0.524411
0.925013 0.332339 0.32271 0.474524 0.42203 0.447774 0.434228 0.432656
0.427778 0.148852 0.445285 0.539289 0.330351 0.413441 0.675962 0.464686
0.509892 0.553032 0.535183 0.482403 0.298737 0.285712 0.439242 0.40374
0.451432 0.365315 0.81813 0.699854 0.416282 0.397797 0.371051 0.485288
0.458896 0.198148 0.326104 0.325467 0.572994 0.774254 0.73517 0.588462
0.537488 0.31052 0.394847 0.408664 0.416968 0.384098 0.401416 0.46904
0.485407 0.578269 0.466837 0.502571 0.422241 0.454069 0.465394 0.289321
0.189866 0.125176 0.520212 0.59625 0.677631 0.436073 0.48108 0.322257
0.410178 0.147334 0.447876 0.410759 0.43832 0.403452 0.433719 0.389441
0.38875 0.423938 0.470321 0.270017 0.378615 0.451906 0.495187 0.482691
0.5588 0.781348 0.950795 0.59647 0.751438 0.353331 0.397266 0.417142
0.357393 0.43399 0.516817 0.413464 0.236428 0.644978 0.492506 0.415772
0.386514 0.427608 0.361079 0.448614 0.315512 0.636821 0.590889 0.498053
0.401018 0.454323 0.51574 0.170022 0.36601 0.737997 0.891091 0.864222
0.673885 0.438076 0.376149 0.523265 0.372486 0.504477 0.873226 0.673873
0.588785 0.304727 0.412014 0.960913 0.741044 0.652701 0.373769 0.392044
0.313478 0.891655 0.555178 0.514544 0.483726 0.389522 0.422701 0.375399
0.516873 0.632922 0.911397 0.517069 0.240618 0.624995 0.218475 0.348734
0.231722 0.697405 0.757417 0.785976 0.601412 0.348652 0.374282 0.388534
0.443723 0.497108 0.451186 0.617919 0.636952 0.578212 0.199762 0.313075
0.398856 0.373126 0.257106 0.0922148 0.677214 0.75265 0.601098 0.235873
0.325615 0.311017 0.531499 0.411068 0.301508 0.286707 0.591961 0.576876
0.715168 0.304911 0.221809 0.190612 0.187663 0.289388 0.302303 0.325477
0.456554 0.061114 0.208129 0.385949 0.59141 0.420912 0.441107 0.48409
0.415183 0.284447 0.35599 0.353712 0.395329 0.419135 0.375558 0.360401
0.513415 0.379656 0.351979 0.29871 0.460782 0.499414 0.350351 0.408764
0.190748 0.185192 0.0716852 0.252419 0.401053 0.570271 0.449037 0.471386
0.711056 0.406135 0.381441 0.465452 0.556803 0.362219 0.397426 0.283517
0.469287 0.172218 0.32437 0.249742 0.228482 0.328871 0.441785 0.391457
0.294309 0.292858 0.790192 0.242205 0.110555 0.1726 0.471768 0.462354
0.283736 0.427435 0.60947 0.392336 0.324367 0.41069 0.592281 0.482254
0.41897;
#X coords 0 0 256 1 256 200 1 0 0;
#X restore 456 387 graph;
#X msg 338 272 512;
#X msg 293 272 256;
#N canvas 1155 165 304 328 display 0;
#X obj 52 24 inlet;
#X msg 54 120 \; amp_left resize \$1;
#X msg 78 177 \; amp_right resize \$1;
#X msg 132 232 \; pan resize \$1;
#X connect 0 0 1 0;
#X connect 0 0 2 0;
#X connect 0 0 3 0;
#X restore 293 320 pd display;
#X text 236 244 num bins to display;
#N canvas 572 95 775 797 fft-analysis-resynthesis 0;
#X obj 53 120 inlet~;
#X obj 53 654 *~;
#X obj 53 161 *~;
#X obj 89 160 tabreceive~ hanning;
#X obj 53 692 outlet~;
#X obj 90 655 tabreceive~ hanning;
#X obj 53 287 rfft~;
#X obj 53 383 rifft~;
#X obj 54 36 block~ 1024 4;
#X obj 53 590 *~;
#X obj 71 505 loadbang;
#X msg 71 533 1024;
#X obj 71 560 expr 1 / ($f1 * 3 / 2);
#X text 160 35 FFT size 1024 with overlap 4 (hop is 128 samples);
#X obj 285 120 inlet~;
#X obj 285 654 *~;
#X obj 285 161 *~;
#X obj 321 160 tabreceive~ hanning;
#X obj 285 692 outlet~;
#X obj 322 655 tabreceive~ hanning;
#X obj 285 287 rfft~;
#X obj 285 383 rifft~;
#X obj 285 590 *~;
#X obj 303 505 loadbang;
#X msg 303 533 1024;
#X obj 303 560 expr 1 / ($f1 * 3 / 2);
#X text 341 119 input signal;
#X text 470 157 apply hanning window;
#X text 468 654 apply hanning window;
#X text 340 383 reconstruct time domain signal with an inverse FFT
;
#X text 289 335 <-- APPLY YOUR SPECTRAL FILTERING HERE!!!;
#X text 345 691 output signal;
#X text 320 587 normalize for an FFT sized 1024 with hanning overlap
4;
#X text 339 284 perform FFT (here we use rfft~ for efficiency);
#N canvas 69 119 1098 716 spatial-filter 0;
#X obj 80 47 inlet~;
#X obj 139 47 inlet~;
#X obj 80 600 outlet~;
#X obj 139 601 outlet~;
#X obj 681 48 inlet~;
#X obj 739 47 inlet~;
#X obj 681 601 outlet~;
#X obj 739 601 outlet~;
#X obj 175 109 *~;
#X obj 217 109 *~;
#X obj 175 167 sqrt~;
#X obj 175 138 +~;
#X obj 779 100 *~;
#X obj 821 100 *~;
#X obj 779 158 sqrt~;
#X obj 779 129 +~;
#X obj 779 261 tabwrite~ amp_right;
#X obj 791 230 bang~;
#X obj 175 271 tabwrite~ amp_left;
#X obj 188 240 bang~;
#X obj 389 266 expr~ $v2 / ($v1 + $v2);
#X obj 234 420 bang~;
#X obj 278 420 tabwrite~ pan;
#X obj 139 565 *~;
#X obj 80 565 *~;
#X floatatom 414 394 5 0 0 0 - - -;
#X floatatom 504 396 5 0 0 0 - - -;
#X obj 739 564 *~;
#X obj 681 564 *~;
#X obj 432 475 *~;
#X text 853 99 compute bin amplitude;
#X text 837 230 display amplitude in array;
#X text 88 23 real;
#X text 146 22 img;
#X text 691 22 real;
#X text 749 21 img;
#X text 88 623 real;
#X text 146 622 img;
#X text 692 622 real;
#X text 750 621 img;
#X obj 547 236 +~ 1e-20;
#X obj 389 236 +~ 1e-20;
#X text 405 201 analyze for pan position;
#X text 430 319 filter for bins;
#X text 432 337 within pan range;
#X text 776 549 pass bins within range \,;
#X text 776 565 gate bins not in range;
#X obj 414 366 r left;
#X obj 504 369 r right;
#X obj 479 423 <~ 1;
#X obj 389 421 >~ 0;
#X connect 0 0 8 0;
#X connect 0 0 8 1;
#X connect 0 0 24 0;
#X connect 1 0 9 0;
#X connect 1 0 9 1;
#X connect 1 0 23 0;
#X connect 4 0 12 0;
#X connect 4 0 12 1;
#X connect 4 0 28 0;
#X connect 5 0 13 0;
#X connect 5 0 13 1;
#X connect 5 0 27 0;
#X connect 8 0 11 0;
#X connect 9 0 11 1;
#X connect 10 0 18 0;
#X connect 10 0 41 0;
#X connect 11 0 10 0;
#X connect 12 0 15 0;
#X connect 13 0 15 1;
#X connect 14 0 16 0;
#X connect 14 0 40 0;
#X connect 15 0 14 0;
#X connect 17 0 16 0;
#X connect 19 0 18 0;
#X connect 20 0 22 0;
#X connect 20 0 49 0;
#X connect 20 0 50 0;
#X connect 21 0 22 0;
#X connect 23 0 3 0;
#X connect 24 0 2 0;
#X connect 25 0 50 1;
#X connect 26 0 49 1;
#X connect 27 0 7 0;
#X connect 28 0 6 0;
#X connect 29 0 23 1;
#X connect 29 0 24 1;
#X connect 29 0 27 1;
#X connect 29 0 28 1;
#X connect 40 0 20 1;
#X connect 41 0 20 0;
#X connect 47 0 25 0;
#X connect 48 0 26 0;
#X connect 49 0 29 1;
#X connect 50 0 29 0;
#X restore 123 337 pd spatial-filter;
#X connect 0 0 2 0;
#X connect 1 0 4 0;
#X connect 2 0 6 0;
#X connect 3 0 2 1;
#X connect 5 0 1 1;
#X connect 6 0 34 0;
#X connect 6 1 34 1;
#X connect 7 0 9 0;
#X connect 9 0 1 0;
#X connect 10 0 11 0;
#X connect 11 0 12 0;
#X connect 12 0 9 1;
#X connect 14 0 16 0;
#X connect 15 0 18 0;
#X connect 16 0 20 0;
#X connect 17 0 16 1;
#X connect 19 0 15 1;
#X connect 20 0 34 2;
#X connect 20 1 34 3;
#X connect 21 0 22 0;
#X connect 22 0 15 0;
#X connect 23 0 24 0;
#X connect 24 0 25 0;
#X connect 25 0 22 1;
#X connect 34 0 7 0;
#X connect 34 1 7 1;
#X connect 34 2 21 0;
#X connect 34 3 21 1;
#X restore 50 484 pd fft-analysis-resynthesis;
#X obj 143 132 hsl 128 15 0 1 0 1 right empty empty -2 -8 0 10 -262144
-1 -1 12700 1;
#X floatatom 97 128 5 0 0 0 - - -;
#X obj 143 107 hsl 128 15 0 1 0 1 left empty empty -2 -8 0 10 -262144
-1 -1 0 1;
#X floatatom 98 102 5 0 0 0 - - -;
#X text 280 102 left bound;
#X text 281 128 right bound;
#X text 457 592 low --------- frequency --------- hi;
#X text 412 385 left;
#X text 411 566 right;
#X connect 3 0 6 0;
#X connect 4 0 6 0;
#X connect 5 0 6 0;
#X connect 6 0 14 0;
#X connect 6 1 14 1;
#X connect 10 0 12 0;
#X connect 11 0 12 0;
#X connect 14 0 1 0;
#X connect 14 1 1 1;
#X connect 15 0 16 0;
#X connect 17 0 18 0;
