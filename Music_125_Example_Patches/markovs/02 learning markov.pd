#N canvas 321 34 947 908 24;
#N canvas 0 22 450 278 (subpatch) 0;
#X array counts 144 float 3;
#A 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0;
#X coords 0 50 144 0 400 280 1 0 0;
#X restore 509 80 graph;
#X obj 810 370 s counts;
#X msg 713 370 const 0;
#X obj 620 371 r clear;
#X obj 39 426 cnv 15 450 450 empty empty empty 20 12 0 14 -232576 -66577
0;
#X obj 522 429 cnv 15 375 450 empty empty empty 20 12 0 14 -204786
-66577 0;
#X obj 40 301 cnv 15 425 90 empty empty empty 20 12 0 14 -261234 -66577
0;
#X obj 53 514 spigot;
#X obj 154 612 timer;
#X obj 154 572 t b b;
#X floatatom 53 651 5 0 0 0 - - -;
#X floatatom 154 649 5 0 0 0 - - -;
#N canvas 866 301 641 635 last-two 0;
#X obj 191 305 float;
#X obj 153 345 pack 0 0;
#X obj 153 235 t f f b;
#X msg 153 392 \$2 \$1;
#X obj 153 496 outlet;
#X obj 153 96 inlet;
#X text 238 93 takes stream of numbers;
#X text 245 494 outputs from \, to pairs;
#X connect 0 0 1 1;
#X connect 1 0 3 0;
#X connect 2 0 1 0;
#X connect 2 1 0 1;
#X connect 2 2 0 0;
#X connect 3 0 4 0;
#X connect 5 0 2 0;
#X restore 53 770 pd last-two;
#X floatatom 53 731 5 0 0 0 - - -;
#N canvas 291 121 614 629 increment 0;
#X obj 369 423 tabwrite counts;
#X obj 133 146 unpack 0 0;
#X obj 133 234 + 0;
#X floatatom 133 289 5 0 0 0 - - -;
#X text 263 145 unwravel into 1d array;
#X text 201 288 index in 1d array;
#X obj 186 423 tabread counts;
#X obj 133 467 +;
#X msg 133 425 1;
#X floatatom 133 512 5 0 0 0 - - -;
#X obj 133 362 t b f f;
#X obj 133 50 inlet;
#X obj 133 189 * 12;
#X connect 1 0 12 0;
#X connect 1 1 2 1;
#X connect 2 0 3 0;
#X connect 3 0 10 0;
#X connect 6 0 7 1;
#X connect 7 0 9 0;
#X connect 8 0 7 0;
#X connect 9 0 0 0;
#X connect 10 0 8 0;
#X connect 10 1 6 0;
#X connect 10 2 0 1;
#X connect 11 0 1 0;
#X connect 12 0 2 0;
#X restore 53 814 pd increment;
#X obj 53 695 % 12;
#N canvas 532 191 819 492 input 0;
#X obj 458 194 seq;
#X msg 458 82 read FreeBird_Solo.mid;
#X msg 489 127 bang;
#X obj 494 237 midiout;
#X obj 458 283 midiparse;
#X obj 458 322 unpack 0 0;
#X msg 560 129 stop;
#X obj 59 88 notein;
#X obj 59 197 outlet;
#X obj 153 198 outlet;
#X text 453 38 or use a midi file for input;
#X text 53 40 use a midi keyboard for input;
#X obj 458 387 outlet;
#X obj 565 386 outlet;
#X connect 0 0 4 0;
#X connect 0 0 3 0;
#X connect 0 1 3 1;
#X connect 1 0 0 0;
#X connect 2 0 0 0;
#X connect 4 0 5 0;
#X connect 5 0 12 0;
#X connect 5 1 13 0;
#X connect 6 0 0 0;
#X connect 7 0 8 0;
#X connect 7 1 9 0;
#X restore 53 469 pd input;
#X text 228 595 this into a second;
#X text 228 616 markov chain for;
#X text 126 729 pitch class (ignore octave);
#X text 201 813 increment table;
#X text 156 467 midi input;
#X text 135 514 only track onsets;
#X obj 549 613 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 549 771 makenote 100 250;
#X obj 549 820 noteout 1;
#X obj 549 468 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 549 687 + 60;
#X floatatom 571 733 5 0 0 0 - - -;
#X floatatom 645 509 5 0 0 0 - - -;
#N canvas 717 160 453 541 random-rhythm 0;
#X obj 47 31 inlet;
#X obj 111 410 outlet;
#X obj 137 175 random 5;
#X obj 147 210 sel 0 1 2 3 4;
#X obj 219 325 + 0;
#X msg 151 261 100;
#X msg 205 264 250;
#X msg 256 258 500;
#X msg 319 255 125;
#X msg 379 253 125;
#X connect 0 0 2 0;
#X connect 2 0 3 0;
#X connect 3 0 5 0;
#X connect 3 1 6 0;
#X connect 3 2 7 0;
#X connect 3 3 8 0;
#X connect 3 4 9 0;
#X connect 4 0 1 0;
#X connect 5 0 4 0;
#X connect 6 0 4 0;
#X connect 7 0 4 0;
#X connect 8 0 4 0;
#X connect 9 0 4 0;
#X restore 673 547 pd random-rhythm;
#X obj 549 546 metro 500;
#N canvas 377 177 909 708 markov 0;
#X obj 133 504 prob;
#C 11 11 0;
#C 11 10 0;
#C 11 9 0;
#C 11 8 0;
#C 11 7 1;
#C 11 6 0;
#C 11 5 0;
#C 11 4 0;
#C 11 3 0;
#C 11 2 0;
#C 11 1 0;
#C 11 0 0;
#C 10 11 0;
#C 10 10 0;
#C 10 9 0;
#C 10 8 0;
#C 10 7 0;
#C 10 6 0;
#C 10 5 25;
#C 10 4 0;
#C 10 3 0;
#C 10 2 0;
#C 10 1 0;
#C 10 0 0;
#C 9 11 0;
#C 9 10 0;
#C 9 9 0;
#C 9 8 0;
#C 9 7 0;
#C 9 6 0;
#C 9 5 0;
#C 9 4 0;
#C 9 3 0;
#C 9 2 0;
#C 9 1 0;
#C 9 0 0;
#C 8 11 0;
#C 8 10 0;
#C 8 9 0;
#C 8 8 0;
#C 8 7 0;
#C 8 6 0;
#C 8 5 0;
#C 8 4 0;
#C 8 3 0;
#C 8 2 0;
#C 8 1 0;
#C 8 0 0;
#C 7 11 0;
#C 7 10 0;
#C 7 9 0;
#C 7 8 0;
#C 7 7 0;
#C 7 6 0;
#C 7 5 2;
#C 7 4 0;
#C 7 3 0;
#C 7 2 2;
#C 7 1 0;
#C 7 0 0;
#C 6 11 0;
#C 6 10 0;
#C 6 9 0;
#C 6 8 0;
#C 6 7 0;
#C 6 6 0;
#C 6 5 0;
#C 6 4 0;
#C 6 3 0;
#C 6 2 0;
#C 6 1 0;
#C 6 0 0;
#C 5 11 1;
#C 5 10 25;
#C 5 9 0;
#C 5 8 0;
#C 5 7 2;
#C 5 6 0;
#C 5 5 21;
#C 5 4 0;
#C 5 3 0;
#C 5 2 18;
#C 5 1 0;
#C 5 0 0;
#C 4 11 0;
#C 4 10 0;
#C 4 9 0;
#C 4 8 0;
#C 4 7 0;
#C 4 6 0;
#C 4 5 0;
#C 4 4 0;
#C 4 3 0;
#C 4 2 0;
#C 4 1 0;
#C 4 0 0;
#C 3 11 0;
#C 3 10 0;
#C 3 9 0;
#C 3 8 0;
#C 3 7 0;
#C 3 6 0;
#C 3 5 0;
#C 3 4 0;
#C 3 3 0;
#C 3 2 0;
#C 3 1 0;
#C 3 0 0;
#C 2 11 0;
#C 2 10 0;
#C 2 9 0;
#C 2 8 0;
#C 2 7 1;
#C 2 6 0;
#C 2 5 19;
#C 2 4 0;
#C 2 3 0;
#C 2 2 0;
#C 2 1 0;
#C 2 0 0;
#C 1 11 0;
#C 1 10 0;
#C 1 9 0;
#C 1 8 0;
#C 1 7 0;
#C 1 6 0;
#C 1 5 0;
#C 1 4 0;
#C 1 3 0;
#C 1 2 0;
#C 1 1 0;
#C 1 0 0;
#C 0 11 0;
#C 0 10 0;
#C 0 9 0;
#C 0 8 0;
#C 0 7 0;
#C 0 6 0;
#C 0 5 0;
#C 0 4 0;
#C 0 3 0;
#C 0 2 1;
#C 0 1 0;
#C 0 0 0;
#C embed 1;
#C reset 0;
#C restore;
#X msg 439 321 clear;
#X text 509 321 clear matrix;
#X msg 465 373 dump;
#X text 529 372 print all transitions;
#X text 586 417 save with patcher;
#X floatatom 155 568 5 0 0 0 - - -;
#X obj 133 142 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 174 541 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X text 471 230 reset when stuck;
#N canvas 369 34 874 796 learn 0;
#X obj 186 38 inlet;
#X obj 189 673 outlet;
#X obj 187 370 t f f;
#X obj 185 465 int;
#X obj 341 468 tabread counts;
#X obj 186 324 t f f;
#X obj 188 536 pack 0 0 0;
#X obj 183 234 mycounter;
#X floatatom 200 284 5 0 0 0 - - -;
#X obj 168 187 until;
#X obj 186 143 t f b;
#X obj 186 421 / 12;
#X obj 259 466 % 12;
#X text 328 286 converts from 1d array to 2d array indices;
#X text 304 671 outputs all pairwise transitions from table;
#X text 369 319 x = i / 12;
#X text 371 347 y = i % 12;
#X text 286 36 144 = 12 * 12 = total number of table elements;
#X connect 0 0 10 0;
#X connect 2 0 11 0;
#X connect 2 1 12 0;
#X connect 3 0 6 0;
#X connect 4 0 6 2;
#X connect 5 0 2 0;
#X connect 5 1 4 0;
#X connect 6 0 1 0;
#X connect 7 0 8 0;
#X connect 7 0 5 0;
#X connect 9 0 7 0;
#X connect 10 0 9 0;
#X connect 10 1 7 1;
#X connect 11 0 3 0;
#X connect 12 0 6 1;
#X restore 220 180 pd learn;
#X obj 133 602 outlet;
#X obj 133 92 inlet;
#X msg 378 233 reset 0;
#X msg 487 420 embed 1;
#X msg 220 137 144;
#X obj 440 281 r clear;
#X obj 220 93 r learn;
#X text 286 136 144 = 12 * 12 = total number of table elements;
#X connect 0 0 6 0;
#X connect 0 0 11 0;
#X connect 0 1 8 0;
#X connect 1 0 0 0;
#X connect 3 0 0 0;
#X connect 7 0 0 0;
#X connect 10 0 0 0;
#X connect 12 0 7 0;
#X connect 13 0 0 0;
#X connect 14 0 0 0;
#X connect 15 0 10 0;
#X connect 16 0 1 0;
#X connect 17 0 15 0;
#X restore 549 643 pd markov;
#X text 667 820 send to midi device;
#X text 663 639 select next note;
#X text 604 685 scale to middle C;
#X text 743 766 make note;
#X text 571 576 constant or random rhythm;
#X text 534 430 play;
#X text 54 434 build markov table from this input;
#X obj 233 309 s clear;
#X obj 204 314 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 344 346 s learn;
#X obj 316 355 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X text 50 308 clear table ->;
#X text 49 348 update playback engine ->;
#X text 46 74 1 click clear to reset table;
#X text 78 127 transitions will be counted and stored;
#X text 78 153 in the table on the right;
#X text 46 99 2 play input from keyboad or file.;
#X text 76 230 hitting learn again will update the;
#X text 76 256 markov model with the current counts;
#X text 44 180 3 click learn to update the markov object;
#X text 22 28 learn musical style using markov chains;
#X text 44 205 4 play new music from the markov model.;
#X text 228 572 note timing. turn;
#X text 227 637 rhythm!!!;
#X text 189 768 stream pairs of last two;
#X connect 2 0 1 0;
#X connect 3 0 2 0;
#X connect 7 0 9 0;
#X connect 7 0 10 0;
#X connect 8 0 11 0;
#X connect 9 0 8 0;
#X connect 9 1 8 1;
#X connect 10 0 15 0;
#X connect 12 0 14 0;
#X connect 13 0 12 0;
#X connect 15 0 13 0;
#X connect 16 2 7 0;
#X connect 16 3 7 1;
#X connect 23 0 32 0;
#X connect 24 0 25 0;
#X connect 24 1 25 1;
#X connect 26 0 31 0;
#X connect 27 0 24 0;
#X connect 27 0 28 0;
#X connect 29 0 31 1;
#X connect 31 0 23 0;
#X connect 32 0 27 0;
#X connect 41 0 40 0;
#X connect 43 0 42 0;
